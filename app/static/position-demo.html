<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Position Charts - Enhanced Demo</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:opsz,wght@6..12,400;6..12,500;6..12,600;6..12,700&display=swap" rel="stylesheet">
<style>
:root {
  --brand-green: #78be20;
  --brand-green-light: rgba(120, 190, 32, 0.15);
  --text-primary: #1f2937;
  --text-secondary: #4b5563;
  --text-muted: #6b7280;
  --bg-page: #f8faf6;
  --bg-card: #ffffff;
  --bg-subtle: #f4f7f2;
  --border-light: #e5e7eb;
  --positive: #16a34a;
  --negative: #dc2626;
  --neutral: #6b7280;
}

* { box-sizing: border-box; }

body {
  font-family: 'Nunito Sans', sans-serif;
  background: var(--bg-page);
  margin: 0;
  padding: 40px 20px;
  color: var(--text-primary);
}

.container {
  max-width: 600px;
  margin: 0 auto;
}

h2 {
  font-size: 1rem;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 24px;
}

.card {
  background: var(--bg-card);
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  margin-bottom: 32px;
}

.card-title {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-muted);
  margin-bottom: 8px;
  font-weight: 700;
}

.card-subtitle {
  font-size: 0.85rem;
  color: var(--text-muted);
  margin-bottom: 20px;
}

/* ============================================
   ENHANCED POSITION TRACKS
   ============================================ */
.position-charts {
  display: flex;
  flex-direction: column;
  gap: 18px;
}

.position-row {
  display: grid;
  grid-template-columns: 80px 1fr 100px;
  align-items: center;
  gap: 12px;
}

.position-label {
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-secondary);
}

.position-track-wrapper {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.position-track {
  position: relative;
  height: 8px;
  background: var(--bg-subtle);
  border-radius: 4px;
}

.position-range {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 100%;
  background: linear-gradient(90deg, var(--border-light) 0%, var(--brand-green-light) 50%, var(--border-light) 100%);
  border-radius: 4px;
}

.position-marker {
  position: absolute;
  top: 50%;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
}

.position-marker.avg {
  background: white;
  border: 2px solid var(--text-muted);
  box-shadow: 0 1px 3px rgba(0,0,0,0.15);
}

.position-marker.you {
  background: var(--brand-green);
  border: 2px solid white;
  box-shadow: 0 2px 6px rgba(120, 190, 32, 0.5);
  z-index: 3;
}

.track-labels {
  display: flex;
  justify-content: space-between;
  font-size: 0.65rem;
  color: var(--text-muted);
}

/* Value Column - Simplified */
.position-result {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 8px;
  cursor: help;
}

.position-value {
  font-size: 0.95rem;
  font-weight: 700;
  color: var(--text-primary);
}

/* Simple arrow indicator */
.position-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  font-size: 0.7rem;
  font-weight: 700;
}

.position-indicator.positive {
  background: rgba(22, 163, 74, 0.12);
  color: var(--positive);
}

.position-indicator.negative {
  background: rgba(220, 38, 38, 0.12);
  color: var(--negative);
}

.position-indicator.neutral {
  background: rgba(107, 114, 128, 0.1);
  color: var(--neutral);
}

/* Tooltip on hover */
.position-result {
  position: relative;
}

.position-tooltip {
  display: none;
  position: absolute;
  right: 0;
  top: calc(100% + 8px);
  background: var(--text-primary);
  color: white;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 0.75rem;
  white-space: nowrap;
  z-index: 100;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.position-tooltip::before {
  content: '';
  position: absolute;
  bottom: 100%;
  right: 16px;
  border: 6px solid transparent;
  border-bottom-color: var(--text-primary);
}

.position-result:hover .position-tooltip {
  display: block;
}

/* Separator */
.position-separator {
  height: 1px;
  background: var(--border-light);
  margin: 8px 0;
}

/* Legend */
.position-legend {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 20px;
  padding-top: 16px;
  border-top: 1px solid var(--border-light);
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.75rem;
  color: var(--text-muted);
}

.legend-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

.legend-dot.avg {
  background: white;
  border: 2px solid var(--text-muted);
}

.legend-dot.you {
  background: var(--brand-green);
  border: 2px solid white;
  box-shadow: 0 1px 3px rgba(120, 190, 32, 0.4);
}

/* Zone-based tracks (Produktivita, Trend) */
.zone-track {
  display: flex;
  overflow: hidden;
}

.zone {
  flex: 1;
  height: 100%;
}

.zone-low, .zone-declining {
  background: rgba(220, 38, 38, 0.15);
  border-radius: 4px 0 0 4px;
}

.zone-avg, .zone-stable {
  background: rgba(107, 114, 128, 0.12);
}

.zone-high, .zone-growing {
  background: rgba(22, 163, 74, 0.15);
  border-radius: 0 4px 4px 0;
}

/* Zone labels in result */
.zone-label {
  font-size: 0.85rem !important;
  font-weight: 600 !important;
}

.zone-label.high, .zone-label.growing {
  color: var(--positive);
}

.zone-label.avg, .zone-label.stable {
  color: var(--neutral);
}

.zone-label.low, .zone-label.declining {
  color: var(--negative);
}

/* Three-label track */
.position-track-wrapper:has(.zone-track) .track-labels {
  justify-content: space-around;
}

/* Histogram on hover */
.histogram-container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: flex-end;
  gap: 1px;
  opacity: 0;
  transition: opacity 0.2s ease;
  pointer-events: none;
}

.position-row:hover .histogram-container {
  opacity: 1;
}

.position-row:hover .position-range {
  opacity: 0.3;
}

.histogram-bar {
  flex: 1;
  background: var(--brand-green);
  opacity: 0.6;
  border-radius: 1px 1px 0 0;
  min-height: 1px;
}

/* Expand track on hover to show histogram better */
.position-row:hover .position-track {
  height: 28px;
  transition: height 0.2s ease;
}

.position-track {
  transition: height 0.2s ease;
}
</style>
</head>
<body>
<div class="container">

  <h2>Enhanced Position Tracks - Demo</h2>

  <div class="card">
    <div class="card-title">Pozícia v segmente</div>
    <div class="card-subtitle">Segment: <strong>B - shopping</strong></div>

    <div class="position-charts">

      <!-- Bloky - above average (good) -->
      <div class="position-row" data-histogram="2,5,9,15,22,28,24,18,12,7,4,2">
        <div class="position-label">Bloky</div>
        <div class="position-track-wrapper">
          <div class="position-track">
            <div class="position-range"></div>
            <div class="histogram-container"></div>
            <div class="position-marker avg" style="left: 50%;"></div>
            <div class="position-marker you" style="left: 72%;"></div>
          </div>
          <div class="track-labels">
            <span>12k</span>
            <span>95k</span>
          </div>
        </div>
        <div class="position-result">
          <div class="position-value">68k</div>
          <div class="position-indicator positive">↑</div>
          <div class="position-tooltip">+31% vs priemer · Top 25%</div>
        </div>
      </div>

      <!-- Tržby - above average (good) -->
      <div class="position-row" data-histogram="3,6,11,18,25,30,26,19,11,6,3,1">
        <div class="position-label">Tržby</div>
        <div class="position-track-wrapper">
          <div class="position-track">
            <div class="position-range"></div>
            <div class="histogram-container"></div>
            <div class="position-marker avg" style="left: 50%;"></div>
            <div class="position-marker you" style="left: 65%;"></div>
          </div>
          <div class="track-labels">
            <span>0.4M</span>
            <span>2.8M</span>
          </div>
        </div>
        <div class="position-result">
          <div class="position-value">1.8M €</div>
          <div class="position-indicator positive">↑</div>
          <div class="position-tooltip">+29% vs priemer · Top 30%</div>
        </div>
      </div>

      <!-- Rx % - below average (neutral) -->
      <div class="position-row" data-histogram="1,3,7,12,18,24,26,22,16,10,5,2">
        <div class="position-label">Rx %</div>
        <div class="position-track-wrapper">
          <div class="position-track">
            <div class="position-range"></div>
            <div class="histogram-container"></div>
            <div class="position-marker avg" style="left: 55%;"></div>
            <div class="position-marker you" style="left: 38%;"></div>
          </div>
          <div class="track-labels">
            <span>25%</span>
            <span>68%</span>
          </div>
        </div>
        <div class="position-result">
          <div class="position-value">42%</div>
          <div class="position-indicator neutral">–</div>
          <div class="position-tooltip">-13% vs priemer · 40. percentil</div>
        </div>
      </div>

      <!-- FTE - close to average -->
      <div class="position-row" data-histogram="4,8,14,22,28,30,25,18,11,6,3,1">
        <div class="position-label">FTE</div>
        <div class="position-track-wrapper">
          <div class="position-track">
            <div class="position-range"></div>
            <div class="histogram-container"></div>
            <div class="position-marker avg" style="left: 48%;"></div>
            <div class="position-marker you" style="left: 52%;"></div>
          </div>
          <div class="track-labels">
            <span>1.5</span>
            <span>8.2</span>
          </div>
        </div>
        <div class="position-result">
          <div class="position-value">4.5</div>
          <div class="position-indicator neutral">≈</div>
          <div class="position-tooltip">+7% vs priemer · 55. percentil</div>
        </div>
      </div>

      <div class="position-separator"></div>

      <!-- Produktivita - zone-based (high) -->
      <div class="position-row">
        <div class="position-label">Produktivita</div>
        <div class="position-track-wrapper">
          <div class="position-track zone-track">
            <div class="zone zone-low"></div>
            <div class="zone zone-avg"></div>
            <div class="zone zone-high"></div>
            <div class="position-marker you" style="left: 78%;"></div>
          </div>
          <div class="track-labels">
            <span>Nízka</span>
            <span>Priemerná</span>
            <span>Vysoká</span>
          </div>
        </div>
        <div class="position-result">
          <div class="position-value zone-label high">Vysoká</div>
          <div class="position-indicator positive">↑</div>
          <div class="position-tooltip">Top 20% v segmente</div>
        </div>
      </div>

      <!-- Trend - zone-based (growing) -->
      <div class="position-row">
        <div class="position-label">Trend</div>
        <div class="position-track-wrapper">
          <div class="position-track zone-track">
            <div class="zone zone-declining"></div>
            <div class="zone zone-stable"></div>
            <div class="zone zone-growing"></div>
            <div class="position-marker you" style="left: 85%;"></div>
          </div>
          <div class="track-labels">
            <span>Klesajúci</span>
            <span>Stabilný</span>
            <span>Rastúci</span>
          </div>
        </div>
        <div class="position-result">
          <div class="position-value zone-label growing">Rastúci</div>
          <div class="position-indicator positive">↑</div>
          <div class="position-tooltip">+12% YoY · Nad priemerom</div>
        </div>
      </div>

      <div class="position-separator"></div>

      <!-- Bloky/h - below average (bad) -->
      <div class="position-row" data-histogram="3,5,8,12,18,22,25,20,15,10,6,4">
        <div class="position-label">Bloky/h</div>
        <div class="position-track-wrapper">
          <div class="position-track">
            <div class="position-range"></div>
            <div class="histogram-container"></div>
            <div class="position-marker avg" style="left: 55%;"></div>
            <div class="position-marker you" style="left: 35%;"></div>
          </div>
          <div class="track-labels">
            <span>3.5</span>
            <span>11.2</span>
          </div>
        </div>
        <div class="position-result">
          <div class="position-value">5.8</div>
          <div class="position-indicator negative">↓</div>
          <div class="position-tooltip">-19% vs priemer · 30. percentil</div>
        </div>
      </div>

      <!-- Tržby/h - above average (good) -->
      <div class="position-row" data-histogram="2,4,7,14,20,26,22,18,12,8,5,3">
        <div class="position-label">Tržby/h</div>
        <div class="position-track-wrapper">
          <div class="position-track">
            <div class="position-range"></div>
            <div class="histogram-container"></div>
            <div class="position-marker avg" style="left: 50%;"></div>
            <div class="position-marker you" style="left: 68%;"></div>
          </div>
          <div class="track-labels">
            <span>95€</span>
            <span>290€</span>
          </div>
        </div>
        <div class="position-result">
          <div class="position-value">215 €</div>
          <div class="position-indicator positive">↑</div>
          <div class="position-tooltip">+16% vs priemer · Top 25%</div>
        </div>
      </div>

      <!-- Košík - above average (good) -->
      <div class="position-row" data-histogram="4,6,10,16,24,28,24,18,12,8,5,2">
        <div class="position-label">Košík</div>
        <div class="position-track-wrapper">
          <div class="position-track">
            <div class="position-range"></div>
            <div class="histogram-container"></div>
            <div class="position-marker avg" style="left: 45%;"></div>
            <div class="position-marker you" style="left: 62%;"></div>
          </div>
          <div class="track-labels">
            <span>18€</span>
            <span>42€</span>
          </div>
        </div>
        <div class="position-result">
          <div class="position-value">31 €</div>
          <div class="position-indicator positive">↑</div>
          <div class="position-tooltip">+19% vs priemer · Top 35%</div>
        </div>
      </div>

    </div>

    <div class="position-legend">
      <span class="legend-item"><span class="legend-dot avg"></span> Priemer segmentu</span>
      <span class="legend-item"><span class="legend-dot you"></span> Vaša lekáreň</span>
    </div>
  </div>

</div>

<script>
// Generate histogram bars from data attributes
document.querySelectorAll('.position-row[data-histogram]').forEach(row => {
  const data = row.dataset.histogram.split(',').map(Number);
  const container = row.querySelector('.histogram-container');
  if (!container) return;

  const maxVal = Math.max(...data);

  data.forEach(val => {
    const bar = document.createElement('div');
    bar.className = 'histogram-bar';
    bar.style.height = `${(val / maxVal) * 100}%`;
    container.appendChild(bar);
  });
});
</script>
</body>
</html>
